apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: kivoyo
  namespace: argocd
spec:
  project: application
  source:
    repoURL: https://adorsys-gis.github.io/ai-ops
    chart: kivoyo
    targetRevision: 0.1.0
    helm:
      releaseName: kivoyo
      valueFiles:
        - values.yaml
        - values-eks.yaml
      valuesObject:
        ui:
          ingress:
            host: ai.kivoyo.com
            class: alb
            annotations:
              alb.ingress.kubernetes.io/tags: Environment=dev,Owner=adorsys-gis
              alb.ingress.kubernetes.io/load-balancer-name: chat-adorsys-gis
              alb.ingress.kubernetes.io/listen-ports: |
                [
                  {
                    "HTTP":80
                  }, 
                  {
                    "HTTPS": 443
                  }
                ]
              alb.ingress.kubernetes.io/ssl-redirect: '443'
              alb.ingress.kubernetes.io/scheme: "internet-facing"
              alb.ingress.kubernetes.io/target-type: "ip"
              alb.ingress.kubernetes.io/certificate-arn: "arn:aws:acm:eu-central-1:571075516563:certificate/980a6ebb-a87e-4cfb-b8bf-3d0e5da5acf5"
              external-dns.alpha.kubernetes.io/hostname: "ai.kivoyo.com"
              alb.ingress.kubernetes.io/healthcheck-interval-seconds: '15'
              alb.ingress.kubernetes.io/healthcheck-timeout-seconds: '5'
              alb.ingress.kubernetes.io/healthy-threshold-count: '2'
              alb.ingress.kubernetes.io/unhealthy-threshold-count: '2'
        
  destination:
    server: https://kubernetes.default.svc
    namespace: kivoyo
  syncPolicy:
    syncOptions:
      - CreateNamespace=true
    automated:
      prune: true
      selfHeal: true
  revisionHistoryLimit: 4